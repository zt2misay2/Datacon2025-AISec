2023年7月24日,AMD发布了一份安全公告,披露了其Zen2计算机处理器微架构中的一个漏洞。该漏洞被AMD命名为“跨进程信息泄露”,也被称为“Zenbleed”。该漏洞被标记为CVE-2023-20593,并被AMD评为中等严重程度。此问题允许攻击者在特定情况下访问CPU处理的敏感信息。所有运行在基于AMD Zen2处理器上的软件,包括虚拟机、沙箱、容器和进程,都会受到影响。利用此漏洞的软件可能已经存在,预计基于此漏洞的攻击很快就会发生。

所有AMD Zen2 CPU,包括EPYC Rome处理器,都存在此漏洞,具体包括:
- AMD Ryzen 3000系列处理器
- AMD Ryzen PRO 3000系列处理器
- AMD Ryzen Threadripper 3000系列处理器
- 带有Radeon显卡的AMD Ryzen 4000系列处理器
- 带有Radeon显卡的AMD Ryzen PRO 4000系列处理器
- 带有Radeon显卡的AMD Ryzen 5000系列处理器
- 带有Radeon显卡的AMD Ryzen 7020系列处理器
- 第二代AMD EPYC “Rome”处理器

对OVHcloud产品的影响
针对这一事件,我们立即审查了安全公告和技术信息,并确定了以下对我们产品可能产生的影响。
- 公共云:所有产品未受影响
- 托管私有云:所有产品未受影响
- 网站托管与域名:所有产品未受影响
- 裸机云:ADVANCE-1, Advance STOR-1, Advance STOR-2, Game-1, Game-2, HGR-SDS-2, HGR-HCI-4, HGR-HCI-5, HGR-HCI-6, Infra-2, Rise-GAME-1, Rise-GAME-2, Scale-1, Scale-2, Scale-3(仅限由AMD Zen2驱动的服务器)可能受影响
- 其他商用系列专用服务器:未受影响

如何缓解漏洞:
- 客户自行缓解:通过固件包更新在启动时加载修补的微代码。此解决方案将通过操作系统更新(例如linux-firmware包)触发处理器微代码的更新。您可以在您的操作系统编辑器或社区分发更新包后进行操作。此方法取决于您的发行版或操作系统编辑器,并且只有在AMD提供了适当的微代码时才有效。目前,只有“Zen2 Rome”和“Zen2 Castle Peak”可以通过此方法覆盖。
- 使用更新的内核缓解:当无法通过固件更新包获得微代码更新时,您可以更新内核版本,通过配置所谓的“chicken bit”来禁用故障处理器功能以实现缓解。这可能会影响系统的性能。此解决方案将在操作系统编辑器回传新版本的Linux内核时包含。我们建议客户优先采用此缓解策略,因为这是最有效的,不依赖于硬件供应商是否提供更新的微代码。
- 作为替代方案,您可以手动设置chicken bit而不依赖内核更新。然而,我们不推荐这种可能对系统有风险的解决方案。

OVHcloud发起的缓解措施
OVHcloud团队正在努力实施透明的解决方案,确保客户的修补微代码以透明的方式更新。这些解决方案将逐步部署到我们的服务器上。目前正在评估两个主要选项。
- 使用OVHcloud iPXE:当客户使用标准的OVHcloud网络启动(最常见的配置)时,引导加载程序可能会加载微代码更新。一旦可用,通过OVHcloud客户界面重启服务器将导致在从磁盘启动之前加载更新的微代码,从而缓解漏洞。但是,如果您不使用OVHcloud网络启动系统直接从磁盘启动,则不会应用缓解措施,您应该考虑依赖操作系统级别的缓解措施。
- 使用UEFI:UEFI固件更新可能在启动时更新CPU微代码。包括修补微代码的UEFI固件更新可能会在未来几个月内由主板制造商提供。一旦可用,OVHcloud将在任何新交付的服务器上包含此修补微代码。客户随后可以通过联系支持请求UEFI固件更新。

作为潜在受影响服务器的管理员,我该怎么办?
首先,使用我们团队开发的工具(仅限Linux)检查您的服务器是否受到此漏洞的影响:
# wget https://raw.githubusercontent.com/speed47/spectre-meltdown-checker/master/spectre-meltdown-checker.sh
# sh spectre-meltdown-checker.sh --variant zenbleed --explain
如果工具显示“NOT VULNERABLE”(未受影响),则您已经安全,无需进一步行动。
如果工具显示“VULNERABLE”(受影响),则应评估您面临威胁的程度。
裸金属服务器、数据保护与隐私:来自Intel的Mike Ferron-Jones合作撰写。面对严峻的网络威胁环境,企业正在寻找新的数据保护和隐私解决方案及最佳实践。OVHcloud的新款Advance-6裸金属服务器配备了第三代Intel® Xeon®可扩展处理器(以前代号为“Ice Lake”)和Intel®软件保护扩展(Intel SGX)。这些技术提供了更高的性能,并利用机密计算来实现数据隐私、法规遵从性和更强的数据保护。阅读本文以了解更多关于机密计算的信息以及如何从中受益。