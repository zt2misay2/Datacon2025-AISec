什么是机密计算？在过去的几十年里，IT行业主要关注保护存储或传输中的数据。数据加密和解密已成为一种普遍服务，几乎所有用户和公司都在使用，例如用于安全连接的VPN或微软用于加密存储设备的BitLocker。但在处理数据时会发生什么？实际上，在数据处理步骤中，数据没有真正的安全保障。这就是机密计算变得必要的地方。

为什么机密计算很重要？2017年6月，IT界处于警戒状态，世界各地的IT部门加班应对一个有可能摧毁基础设施核心的威胁：Meltdown和Spectre。这些关键硬件漏洞的目标是CPU，影响了自1995年以来生产的使用AMD/Intel处理器的PC、笔记本电脑、服务器和其他设备。这些攻击允许恶意程序访问内存以及其他程序和操作系统。这个例子说明了为什么在数据处理期间进行数据加密和解封也很重要。

机密计算如何工作？以下解释基于英特尔SGX（Intel® Software Guard Extensions），这是OVHcloud在其配备Intel Xeon E-2288G CPU的服务器系列中提供的技术。此外，OVHcloud还提供适用于AMD Zen架构EPYC处理器的AMD Infinity Guard。机密计算通过在安全飞地中运行数据和应用程序来保护它们。飞地是由CPU（可信）保护的内存中的隔离区域，其中包含敏感的应用程序数据。这些内存区域中的代码和数据只能在飞地内部访问。这将数据和代码隔离起来，防止未经授权的访问，即使计算基础设施受到损害。Intel® SGX技术代表了机密计算的主要实现之一，它允许组织将软件和数据与底层基础设施（硬件或操作系统）隔离开来。

结果是：用户现在可以在不受信任的基础设施、公共云和其他托管环境中运行敏感的应用程序和数据。这使用户对其安全边界内外的应用程序和数据的安全性和隐私性有了更大的控制权。

合作伙伴如何从OVHcloud的机密计算产品中受益？机密云产品为客户和合作伙伴提供了以下好处：
- 保护使用中的数据和应用程序
- 帮助保护知识产权（IP）
- 用户可以对整个数据生命周期启用加密
- 避免对正在处理的数据进行攻击和未经授权的访问
- 用户对云中的数据拥有完全控制权

对于在处理过程中处理敏感数据的每个用户来说，机密计算都很重要。借助机密计算，数据是安全的，并且您可以在操作期间将敏感数据与更常见的数据分开。例如，使用敏感数据训练机器学习模型。

通过机密计算，合作伙伴可以为需要安全环境的客户提供一系列产品和解决方案。这可能是金融服务或其他处理个人数据领域的解决方案。

有关OVHcloud机密计算产品组合的更多信息，请访问：
https://www.ovhcloud.com/en/bare-metal/uc-confidential-computing/
请访问
https://www.ovhcloud.com/en/case-studies/securitee/
了解我们的合作伙伴SECURITEE如何利用OVHcloud产品组合提供机密计算解决方案。
我们与OVHcloud的合作非常顺利高效。我们的联合产品可以说是市场上最安全且随时可用的云计算解决方案——这在欧洲市场是一个真正的首创。
裸金属服务器、数据保护与隐私：来自Intel的Mike Ferron-Jones合作撰写。面对严峻的网络威胁环境，企业正在寻找新的数据保护和隐私解决方案及最佳实践。OVHcloud的新款Advance-6裸金属服务器配备了第三代Intel® Xeon®可扩展处理器（以前代号为“Ice Lake”）和Intel®软件保护扩展（Intel SGX）。这些技术提供了更高的性能，并利用机密计算来实现数据隐私、法规遵从性和更强的数据保护。阅读本文以了解更多关于机密计算的信息以及如何从中受益。

现代业务转型的核心在于数据处理能力的提升。随着世界变得更加互联，企业面临数据收集、使用和存储的增长。为了应对这一挑战，云和数据分析等新解决方案不断涌现，正在改变业务运营方式。然而，如果忽视安全问题，这些变化也可能带来更大的风险。我们认为，安全、隐私和合规性必须与业务转型并行推进。因此，我们使用Intel® SGX构建了Advance-6裸金属服务器——它为客户提供了机密计算和增强的数据保护。虽然磁盘和网络加密可以在数据存储或传输时提供保护，但传统上，在数据被CPU和内存使用时是脆弱的。Intel SGX创建了硬件保护的“飞地”，旨在在数据使用时屏蔽数据和代码免受未经授权的方或软件的侵害。飞地内的数据和代码对云管理员或软件堆栈不可访问，从而帮助组织遵守GDPR和其他法规的要求。

通过机密计算应对安全挑战变得尤为重要。企业数据正面临黑客、未经授权的第三方和恶意内部人员的更大威胁，他们经常利用应用程序中的漏洞，或操作系统和虚拟机监控程序层中的特权提升。随着软件安全性的提高，攻击者开始向下移动到堆栈中寻找新的漏洞，这使得商业机密或受监管的数据面临风险。数据泄露可能导致严重的经济损失和声誉损害。这意味着外围防御已不再足够。需要的是多层次的防御策略，使成功执行攻击变得不可行。机密计算技术对于此类策略至关重要，因为它使用基于硬件的方法将数据隔离在可信飞地中并在内存中对其进行加密。这可以保护数据免受操作系统和虚拟机监控程序层中的漏洞的影响，并确保即使具有完全访问权限的用户也无法在没有密钥的情况下解密数据。

机密计算也是“合规计算”。欧洲在隐私和数据保护方面处于世界领先地位，处理个人或受监管数据的组织需要采取措施来最小化违规或违反的风险。这意味着部署行业最佳实践和最新的隐私保护技术，以维护数据安全、主权和控制。使用Intel SGX的机密计算可以成为合规制度的关键部分，并有助于降低监管风险。即使是像OVHcloud这样的云提供商也无法访问飞地内受保护的数据。此外，OVHcloud提供认证服务，使客户能够获得加密验证，确认其工作负载运行在真正的Intel SGX硬件上，微代码是最新的，软件负载正是预期的。认证有助于确保客户的数据受到保护并符合规定。

Advance-6裸金属服务器提供了增强的性能，同时使解决方案能够快速大规模部署。它受益于PCIe Gen4和数据中心级NVMe磁盘，从而提高了带宽。OVHcloud链路聚合功能使两台服务器的物理网络链接能够聚合，以实现最佳网络速度。Advance-6服务器还包含第三代Intel® Xeon®可扩展处理器，该处理器通过Intel® 10nm工艺提高了每核性能。它们还包含驱动机密计算的技术——Intel® SGX。Intel® SGX在CPU级别内置，使数据能够在可信的加密飞地中隔离。Intel® SGX还提供：即使操作系统/驱动程序/BIOS/VMM/SMM被破坏，也能防止攻击；即使攻击者完全控制平台，也能增加对秘密（数据/密钥/密码）的保护；防御针对内存总线窥探、内存篡改和针对RAM的“冷启动”攻击。

以下是一些机器学习和密码学中的示例：
安全多方计算
组织经常需要协作，但由于保密或法规原因，共享数据是被禁止的。安全多方计算是一种隐私保护技术，使多方能够汇集他们的数据并产生更准确的结果，同时保持每个方的数据对其他方的私密性。各方都可以使用认证功能来验证其“数据洁净室”是否正常运行并且软件是他们所期望的。Intel SGX今天用于多党医疗研究和金融欺诈检测用例。
联邦学习
联邦学习是一种隐私保护机器学习（PPML）方法，它将算法部署到分散的设备或站点，以便从太大或太敏感而无法移动到公共数据洁净室的数据中创建联合分析。在这种用例中，算法在进行分析时受到Intel SGX飞地的保护。去除任何私人信息后，结果会传递到中央节点，与其他节点的结果结合，并将新的权重或参数推送到远程模型。这确保敏感数据不会暴露于威胁，并帮助组织构建更准确的模型。
在3月7日，VEEAM发布了一篇知识库文章，描述了该公司提供的几款软件中的一个新的CVE漏洞。此漏洞可能导致凭据泄露和远程代码执行。VEEAM是一家专注于虚拟化基础设施和基于云的应用程序的弹性的软件公司。其主要软件VEEAM Backup & Replication为虚拟机、物理服务器、云基础设施或应用程序提供备份解决方案，并支持多种类型的备份存储库来存储备份（如CIFS、S3桶等）。

OVHcloud中提供了多种使用VEEAM软件的方式：
第一种是Hosted Private Cloud中的Veeam Backup Managed选项，由OVHcloud完全管理并已应用了与此漏洞相关的缓解措施。
第二种是在备份服务器上安装并使用由OVHcloud提供的VEEAM Enterprise选项来获取VEEAM许可证。在这种配置下，按使用量计费，并且您可以使用VEEAM Backup & Replication的所有功能并完全管理基础设施。
最后一种是在备份服务器上自带许可证进行安装。这种情况下，您将完全管理备份基础设施。
在后两种选项中，您可以在VEEAM Backup & Replication软件中添加托管私有云、专用服务器和其他服务。

CVE-2023-27532影响到监听VEEAM服务器TCP 9401端口的Veeam.Backup.Service.exe。它允许未经身份验证的用户请求存储在VEEAM数据库中的凭据，还可以在备份服务器上远程执行命令。攻击者可以使用这些凭据访问受备份软件保护的所有服务器。

尽管利用此漏洞并不简单，但至少有一个勒索软件组织正在积极利用它，并且许多利用代码已公开。因此，未来几周内自动化攻击的数量可能会增加。
在观察到的操作方法中，攻击者利用该CVE漏洞获取备份解决方案覆盖的基础设施的凭据（例如：vSphere凭据等），以便从库存中删除所有虚拟机并最终加密所有备份。然后，他们将要求赎金以获取解密密钥。目前，这种利用仅发生在直接暴露在互联网上的运行Windows操作系统的备份服务器或备份代理上。

所有早于12.0.0.1420 P20230223或11.0.1.1261 P20230227版本的VEEAM Backup & Replication都存在漏洞。如果不受信任的IP可以访问9401端口，则该服务存在漏洞。

为了保护您的基础设施，我们强烈建议您更新备份软件。您可以在官方文档中找到修补后的二进制文件。
在等待更新期间，为了防止未来的漏洞暴露，我们建议应用以下配置：
首先，避免将备份基础设施直接暴露在不安全的网络（如互联网）上。
当您在服务器上安装VEEAM时，它会配置防火墙以允许任何连接到VEEAM端口，而不限制远程地址。因此，所有端口都可以从任何地方直接访问。
我们建议应用防火墙规则，将端口限制为最少的主机。
为此，请确保Windows Defender防火墙设置为阻止所有不符合规则的入站连接。
然后，确保所有使用的端口仅能从您信任的服务器访问。对于最佳配置，请参阅官方文档。
您应该看到防火墙规则现在已限制为您配置的IP。
最后，如果您不使用挂载服务器，我们建议完全阻止9401端口。
由于该利用使用了合法访问，因此无法在虚拟化基础设施或备份存储库级别进行缓解。因此，必须确保使用这些基础设施的组件的安全性。

如果您认为自己已被攻破，我们强烈建议您尽快联系OVHcloud支持，以评估可能恢复数据的解决方案。